<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniUrl</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js" integrity="sha512-n/4gHW3atM3QqRcbCn6ewmpxcLAHGaDjpEBu4xZd47N0W2oQ+6q7oc3PXstrJYXcbNU1OHdQ1T7pAP+gi5Yu8g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.js" integrity="sha512-RT3IJsuoHZ2waemM8ccCUlPNdUuOn8dJCH46N3H2uZoY7swMn1Yn7s56SsE2UBMpjpndeZ91hm87TP1oU6ANjQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <h1>MiniUrl</h1>
    <form action="/save" method="post">
        Url <input name="url" type="text">
        <button type="submit">Submit</button>
    </form>
    <p id="url"></p>
    <script>
        $('form').on('submit',(e)=>{
            e.preventDefault();
            let url = $('input[name=url]').val();
            console.log(url);
            // let data = new FormData();
            // data.append('url',url);
            axios.post('save',{url})
                .then(res=>{
                    console.log(typeof res.data);
                    if (res&&res.data) {
                        $('#url')
                            .html(`<a href="${res.data.url}"target="_blank">${res.data.url}</a>`)
                    }
                })
                .catch(err=>{
                    console.error(err);
                })
        })
    </script>
</body>
</html>